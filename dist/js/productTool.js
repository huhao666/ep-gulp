var arr1=[],arr2=[],arr3=[],h=[],w=[],initW=" ",initH=" ",nowArr1=[],nowArr2=[],nowArr3=[],nowW="",nowH="",productToolHtml="";function queryCheckedValue(){var n="已选择：",o="";$("input:checkbox[name='a']:checked").each(function(t){var e=$(this).val();o=$(".navContent1 input:checkbox[value='"+e+"']").parent("li").text(),n+=o+" "}),$(".subNav").eq(0).children("p").show().html(n)}function queryCheckedValue2(){var n="已选择：";$("input:checkbox[name='b']:checked").each(function(t){var e=$(this).val();vall=$(".navContent2 input:checkbox[value='"+e+"']").parent("li").text(),n+=vall+" "}),$(".subNav").eq(1).children("p").show().html(n)}function queryCheckedValue3(){var n="已选择：",o="";$("input:checkbox[name='c']:checked").each(function(t){var e=$(this).val();o=$(".navContent3 input:checkbox[value='"+e+"']").parent("li").text(),n+=o+" "}),$(".subNav").eq(2).children("p").show().html(n)}function ALLCheckedValue(n,o,r){n.splice(0,n.length),o.splice(0,o.length),r.splice(0,r.length),$("input:checkbox[name='a']:checked").each(function(t){var e=Number($(this).val());n.push(e)}),$("input:checkbox[name='b']:checked").each(function(t){var e=Number($(this).val());o.push(e)}),$("input:checkbox[name='c']:checked").each(function(t){var e=Number($(this).val());r.push(e)})}function getArrDifference(t,e){return t.concat(e).filter(function(t,e,n){return n.indexOf(t)===n.lastIndexOf(t)})}$(function(){$(".button1").click(function(){$(".productToolBox1").show(500).animate({left:50},500),$(".productToolBox2").hide(500).animate({left:50},500)}),$(".button2").click(function(){$(".productToolBox2").show(500).animate({left:50},500),$(".productToolBox1").hide(500).animate({left:50},500)}),$(".quit").click(function(){$(".productToolBox").animate({left:-380},500).hide(500)}),$(".subNav").click(function(){$(this).toggleClass("currentDt").siblings(".subNav").removeClass("currentDt"),$(this).next(".navContent").slideToggle(300).siblings(".navContent").slideUp(500)}),$.ajax({url:common_url+"/getNavList",type:"get",async:!1,dataType:"json",success:function(t){if(t.navList){for(var e=t.navList,n=0;n<e.length;n++)productToolHtml+='<li><input type="checkbox" name="c" value="'+e[n].id+'">'+e[n].name+"</li>";$("#productTool .navContent").eq(2).html(productToolHtml),$("input:checkbox[name='a']").each(function(t){var e=Number($(this).attr("value"));arr1.push(e)}),$("input:checkbox[name='b']").each(function(t){var e=Number($(this).attr("value"));arr2.push(e)}),$("input:checkbox[name='c']").each(function(t){var e=Number($(this).attr("value"));arr3.push(e)})}}}),selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"初始化"),$(".navContent1").on("change","input:checkbox[name='a']",function(){queryCheckedValue(),ALLCheckedValue(nowArr1,nowArr2,nowArr3),selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"勾选1")}),$(".navContent2").on("change","input:checkbox[name='b']",function(){queryCheckedValue2(),ALLCheckedValue(nowArr1,nowArr2,nowArr3),selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"勾选2")}),$(".navContent3").on("change","input:checkbox[name='c']",function(){queryCheckedValue3(),ALLCheckedValue(nowArr1,nowArr2,nowArr3),selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"勾选3")});var t="[data-rangeslider]";$(t).rangeslider({polyfill:!1}),$(document).on("input",t,function(t){var e=t.target.value/t.target.step;1==t.target.getAttribute("a")?($(".weight output").html(w[e]),nowW=1<w.length?w[e]:w[0]):2==t.target.getAttribute("a")&&($(".height output").html(h[e]),nowH=1<h.length?h[e]:h[0])}),$(".weightBox input[type=range]").on("change",function(t){0==nowW?$(".weight output").html("_"):$(".weight output").html(nowW),nowW!=initW&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条1")}),$(".heightBox input[type=range]").change(function(t){0==nowH?$(".height output").html("_"):$(".height output").html(nowH),nowH!=initH&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条2")}),$(".progressReset").click(function(){$("#productTool .weight").html('<h2>作业重量<output>_</output>(kg)</h2><div class="weightBox"><input a="1" type="range" min="0" max="100" step="10" value="0" data-rangeslider><span class="min"></span><span class="max"></span></div>'),$("#productTool .height").html('<h2>起升高度<output>_</output>(mm)</h2><div class="heightBox"><input a="2" type="range" min="0" max="100" step="100" value="0" data-rangeslider><span class="min"></span><span class="max"></span></div>'),$("#productTool .weight input").rangeslider({polyfill:!1}),$("#productTool .height input").rangeslider({polyfill:!1}),selectChange(nowArr1,nowArr2,nowArr3,nowW=" ",nowH=" ",arr1,arr2,arr3,"重置"),$(".weightBox input[type=range]").on("change",function(t){0==nowW?$(".weight output").html("_"):$(".weight output").html(nowW),nowW!=initW&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条1")}),$(".heightBox input[type=range]").change(function(t){0==nowH?$(".height output").html("_"):$(".height output").html(nowH),nowH!=initH&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条2")})}),$(".reset").click(function(){$(".subNav").children("p").hide(),nowArr1.splice(0,nowArr1.length),nowArr2.splice(0,nowArr2.length),nowArr3.splice(0,nowArr3.length),$("#productTool .weight").html('<h2>作业重量<output>_</output>(kg)</h2><div class="weightBox"><input a="1" type="range" min="0" max="100" step="10" value="0" data-rangeslider><span class="min"></span><span class="max"></span></div>'),$("#productTool .height").html('<h2>起升高度<output>_</output>(mm)</h2><div class="heightBox"><input a="2" type="range" min="0" max="100" step="100" value="0" data-rangeslider><span class="min"></span><span class="max"></span></div>'),$("#productTool .weight input").rangeslider({polyfill:!1}),$("#productTool .height input").rangeslider({polyfill:!1}),selectChange(nowArr1,nowArr2,nowArr3,nowW=" ",nowH=" ",arr1,arr2,arr3,"重置"),$(".weightBox input[type=range]").on("change",function(t){0==nowW?$(".weight output").html("_"):$(".weight output").html(nowW),nowW!=initW&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条1")}),$(".heightBox input[type=range]").change(function(t){0==nowH?$(".height output").html("_"):$(".height output").html(nowH),nowH!=initH&&selectChange(nowArr1,nowArr2,nowArr3,nowW,nowH,arr1,arr2,arr3,"进度条2")})}),$(".sure").click(function(){var t="_"==$(".weight output").val()?" ":$(".weight output").val(),e="_"==$(".height output").val()?" ":$(".height output").val(),n={environment:nowArr1,powerType:nowArr2,classId:nowArr3,workingWeight:t,liftingHeight:e};localStorage.setItem("searchData",JSON.stringify(n)),localStorage.getItem("searchData")&&(window.location.href="productSearch.html?getData=1")});var n=[],r="";$.ajax({url:common_url+"/getGroupAllProductList",type:"get",async:!0,dataType:"json",success:function(t){if(t.groupList){r=t.groupList;for(var e='<option value="0">请选择车型</option>',n=0;n<r.length;n++)e+='<option value="'+r[n].id+'">'+r[n].name+"</option>";$("#productTool .selectbox1").html(e),$(".selectbox1").val("0")}}}),$(".selectbox1").change(function(){var t=$(this).val();0==t?$(this).parent().find(".selectbox2").hide():$(this).parent().find(".selectbox2").show();var e='<option value="">请选择型号</option>';if(t){for(var n=0;n<r.length;n++)if(t==r[n].id)for(var o=0;o<r[n].productList.length;o++)e+='<option value="'+r[n].productList[o].id+'" data-name="'+r[n].productList[o].name+"["+r[n].productList[o].modelName+']">'+r[n].productList[o].name+"["+r[n].productList[o].modelName+"]</option>";$(".selectbox2").html(e)}}),$(".selectbox2").change(function(){if(n.length<3){var t=$(this).find("option:selected").attr("data-name"),e=$(this).val();n.push(e),$(".selectText").append('<div class="selectTextinside"><p>'+t+'</p> <span class="del" data-id="'+e+'"></span></div>'),$(".del").on("click",function(){var t=$(this).attr("data-id");t&&(n.removeId(t),$(this).parent().remove())})}}),$(".toCompare").click(function(){if(0<n.length){var t=n.join(",");location.href="productCompare.html?id="+t}else $(".selectDiv p").html("请至少选择一个")}),$(".empty").click(function(){$(".selectbox1").val("0"),$(".selectText").html(" "),$(".selectbox2").hide(),n=[]})}),Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.removeId=function(t){var e=this.indexOf(t);-1<e&&this.splice(e,1)};var count=0;function selectChange(p,s,g,d,v,m,f,x,A){count++,$.ajax({url:common_url+"/selection",type:"get",async:!0,data:{environment:p,powerType:s,classId:g,workingWeight:d,liftingHeight:v},dataType:"json",success:function(t){if(t){$("#productTool .navContent1").html('<li><input type="checkbox" name="a" value="1">水平搬运</li><li><input type="checkbox" name="a" value="2">堆高</li><li><input type="checkbox" name="a" value="3">牵引</li><li><input type="checkbox" name="a" value="4">拣选</li><li><input type="checkbox" name="a" value="5">步行式</li><li><input type="checkbox" name="a" value="6">站驾式</li><li><input type="checkbox" name="a" value="7">座驾式</li>'),$("#productTool .navContent2").html('<li><input type="checkbox" name="b" value="1">电动</li><li><input type="checkbox" name="b" value="2">内燃</li><li><input type="checkbox" name="b" value="3">手动</li>'),$("#productTool .navContent3").html(productToolHtml);var e=t.environment,n=t.powerType,o=t.classId;if("进度条1"==A?h=t.liftingHeight:"进度条2"==A?w=t.workingWeight:(w=t.workingWeight,h=t.liftingHeight),getArrDifference(e,m).forEach(function(t,e){$(".navContent1 input:checkbox[value='"+t+"']").prop("disabled",!0)}),getArrDifference(n,f).forEach(function(t,e){$(".navContent2 input:checkbox[value='"+t+"']").prop("disabled",!0)}),getArrDifference(o,x).forEach(function(t,e){$(".navContent3 input:checkbox[value='"+t+"']").prop("disabled",!0)}),0<p.length&&e.filter(function(t){-1!=p.indexOf(t)&&$(".navContent1 input:checkbox[value='"+t+"']").prop("checked",!0)}),0<s.length&&n.filter(function(t){-1!=s.indexOf(t)&&$(".navContent2 input:checkbox[value='"+t+"']").prop("checked",!0)}),0<g.length&&o.filter(function(t){-1!=g.indexOf(t)&&$(".navContent3 input:checkbox[value='"+t+"']").prop("checked",!0)}),1<w.length)var r=Math.floor(100/(w.length-1));else r=100;var a=w[0],i=w[w.length-1];if(1<h.length)var l=Math.floor(100/(h.length-1));else l=100;var c=h[0],u=h[h.length-1];"进度条1"==A&&1<h.length?($(".height input").attr({step:l}).rangeslider("update",!0),$(".height .min").text(c),$(".height .max").text(u)):"进度条2"==A&&1<w.length?($(".weight input").attr({step:r}).rangeslider("update",!0),$(".weight .min").text(a),$(".weight .max").text(i)):($(".weight input").attr({step:r}).rangeslider("update",!0),$(".height input").attr({step:l}).rangeslider("update",!0),$(".weight .min").text(a),$(".weight .max").text(i),$(".height .min").text(c),$(".height .max").text(u)),initW=d,initH=v}}})}